<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
bool N_trafficlight, S_trafficlight, E_trafficlight, W_trafficlight;
bool N_sensor = true;
bool S_sensor = true;
bool W_sensor = true;
bool E_sensor = true;
bool roadState = false;
chan t1, t2;</declaration><template><name x="5" y="5">Road_state</name><declaration>// Place local declarations here.
int timer;</declaration><location id="id0" x="-16" y="-72"><name x="-48" y="-40">Wait_state2</name></location><location id="id1" x="-16" y="-256"><name x="-128" y="-304">Wait_state</name></location><location id="id2" x="128" y="-160"><name x="118" y="-190">EW_road_state</name></location><location id="id3" x="-168" y="-160"><name x="-178" y="-190">NS_road_state</name></location><init ref="id3"/><transition><source ref="id0"/><target ref="id0"/><label kind="assignment" x="-76" y="-72">timer++</label><nail x="32" y="16"/><nail x="-56" y="16"/><nail x="-24" y="-64"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="assignment" x="-48" y="-360">timer++</label><nail x="-56" y="-336"/><nail x="24" y="-336"/><nail x="-8" y="-272"/></transition><transition><source ref="id0"/><target ref="id3"/><label kind="guard" x="-136" y="-96">timer &gt;= 5</label><label kind="assignment" x="-152" y="-116">roadState = false</label></transition><transition><source ref="id2"/><target ref="id0"/><label kind="guard" x="24" y="-104">N_sensor or S_sensor</label><label kind="assignment" x="24" y="-128">timer = 0</label></transition><transition><source ref="id1"/><target ref="id2"/><label kind="guard" x="24" y="-248">timer &gt;= 5</label><label kind="assignment" x="-4" y="-208">roadState = true</label></transition><transition><source ref="id3"/><target ref="id1"/><label kind="guard" x="-200" y="-256">E_sensor or W_sensor</label><label kind="assignment" x="-152" y="-208">timer = 0</label></transition></template><template><name>Traffic_lights</name><location id="id4" x="48" y="-80"></location><location id="id5" x="-352" y="-80"></location><location id="id6" x="-352" y="-256"><name x="-368" y="-288">All_reds</name></location><init ref="id6"/><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="-712" y="-104">N_sensor == true &amp;&amp;
roadState == false  &amp;&amp;
N_trafficlight == false</label><label kind="assignment" x="-696" y="-56">N_trafficlight = true</label><nail x="-472" y="40"/><nail x="-544" y="-80"/><nail x="-392" y="-80"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="216" y="-64">E_sensor == true &amp;&amp;
roadState == true  &amp;&amp;
E_trafficlight == false</label><label kind="assignment" x="224" y="0">E_trafficlight = true</label><nail x="152" y="48"/><nail x="216" y="-88"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="-24" y="64">W_sensor == true &amp;&amp;
roadState == true  &amp;&amp;
W_trafficlight == false</label><label kind="assignment" x="-24" y="120">W_trafficlight = true</label><nail x="-16" y="48"/><nail x="120" y="48"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="-400" y="128">S_sensor == true &amp;&amp;
roadState == false  &amp;&amp;
S_trafficlight == false</label><label kind="assignment" x="-400" y="104">S_trafficlight = true</label><nail x="-272" y="56"/><nail x="-416" y="56"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="guard" x="-208" y="-40">roadState == false</label><label kind="assignment" x="-200" y="16">W_trafficlight = false,
E_trafficlight = false</label><nail x="-144" y="8"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="guard" x="-144" y="-192">roadState == true</label><label kind="assignment" x="-152" y="-168">N_trafficlight = false,
S_trafficlight = false</label><nail x="-144" y="-136"/></transition><transition><source ref="id6"/><target ref="id5"/><label kind="assignment" x="-344" y="-216">N_trafficlight = false,
S_trafficlight = false,
E_trafficlight = false,
W_trafficlight = false</label></transition></template><template><name>simulate_traffic</name><location id="id7" x="-424" y="-200"></location><init ref="id7"/><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-616" y="-104">W_sensor = false</label><nail x="-504" y="-96"/><nail x="-520" y="-128"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-456" y="-56">E_sensor = false</label><nail x="-416" y="-88"/><nail x="-456" y="-88"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-344" y="-88">S_sensor = false</label><nail x="-328" y="-112"/><nail x="-360" y="-96"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-256" y="-144">N_sensor = false</label><nail x="-264" y="-168"/><nail x="-280" y="-136"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-248" y="-224">W_sensor = true</label><nail x="-256" y="-224"/><nail x="-256" y="-200"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-248" y="-280">E_sensor = true</label><nail x="-272" y="-280"/><nail x="-264" y="-256"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-280" y="-344">S_sensor = true</label><nail x="-288" y="-320"/><nail x="-280" y="-304"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="assignment" x="-368" y="-392">N_sensor = true</label><nail x="-320" y="-352"/><nail x="-312" y="-336"/></transition></template><system>
// List one or more processes to be composed into a system.
system Road_state, Traffic_lights, simulate_traffic;</system></nta>